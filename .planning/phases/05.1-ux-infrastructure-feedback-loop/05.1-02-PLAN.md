---
phase: 05.1-ux-infrastructure-feedback-loop
plan: 02
type: execute
wave: 2
depends_on: ["05.1-01"]
files_modified:
  - components/MonthGrid.tsx
  - components/VacationSummary.tsx
  - components/Legend.tsx
  - components/DayTooltip.tsx
  - components/AuthHeader.tsx
  - components/UserMenu.tsx
  - components/MigrationReview.tsx
  - components/FullYearCalendar.tsx
  - app/page.tsx
  - public/manifest.json
autonomous: true

must_haves:
  truths:
    - "All calendar day cells use Coffee semantic colors (holiday=Cinnamon, bridge=Honey, vacation=Caramel)"
    - "All UI chrome uses Coffee base colors (Foam background, Espresso text, Latte borders)"
    - "No hardcoded Tailwind default color classes remain (no bg-red-*, bg-blue-*, bg-gray-*, etc.)"
    - "Legend color blocks match the actual calendar day colors"
    - "PWA manifest uses Coffee theme color"
  artifacts:
    - path: "components/MonthGrid.tsx"
      provides: "Calendar day cells with Coffee colors"
      contains: "bg-holiday-bg"
    - path: "components/Legend.tsx"
      provides: "Legend with Coffee color blocks"
      contains: "bg-cinnamon"
    - path: "components/VacationSummary.tsx"
      provides: "Summary panel with Coffee styling"
      contains: "text-espresso"
    - path: "public/manifest.json"
      provides: "PWA manifest with Coffee theme"
      contains: "C68E17"
  key_links:
    - from: "components/MonthGrid.tsx"
      to: "app/globals.css"
      via: "Tailwind utility classes from @theme tokens"
      pattern: "bg-(holiday|bridge|vacation|weekend)"
    - from: "components/Legend.tsx"
      to: "components/MonthGrid.tsx"
      via: "Matching color semantics"
      pattern: "bg-(cinnamon|honey|caramel)"
---

<objective>
Migrate all component Tailwind color classes from hardcoded defaults (bg-red-100, text-gray-800, etc.) to Coffee theme tokens (bg-holiday-bg, text-espresso, etc.).

Purpose: This is the visual reskin itself. Plan 01 defined the tokens; this plan applies them across every component. After this plan, the entire app renders with the Coffee visual identity.
Output: All 10 files updated with Coffee token classes. Zero hardcoded default Tailwind colors remain.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05.1-ux-infrastructure-feedback-loop/05.1-CONTEXT.md
@.planning/phases/05.1-ux-infrastructure-feedback-loop/05.1-RESEARCH.md
@.planning/phases/05.1-ux-infrastructure-feedback-loop/05.1-01-SUMMARY.md

@components/MonthGrid.tsx
@components/VacationSummary.tsx
@components/Legend.tsx
@components/DayTooltip.tsx
@components/AuthHeader.tsx
@components/UserMenu.tsx
@components/MigrationReview.tsx
@components/FullYearCalendar.tsx
@app/page.tsx
@public/manifest.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate calendar components to Coffee colors</name>
  <files>
    components/MonthGrid.tsx
    components/Legend.tsx
    components/DayTooltip.tsx
    components/FullYearCalendar.tsx
  </files>
  <action>
Apply the following color mapping systematically. This is a VISUAL-ONLY change. Do NOT modify any component logic, event handlers, state management, or prop interfaces.

**MonthGrid.tsx** - The core calendar grid with day cell coloring:

Replace these class patterns:
- `ring-blue-500` -> `ring-today-ring` (today indicator)
- `bg-gray-200` -> `bg-highlight` (highlight flash on tap)
- `bg-red-100 text-red-900` -> `bg-holiday-bg text-holiday` (holidays)
- `bg-yellow-100 text-yellow-900` -> `bg-bridge-bg text-bridge` (bridge days)
- `bg-blue-100 text-blue-900` -> `bg-vacation-bg text-vacation` (vacation days)
- `bg-gray-50 text-gray-500` -> `bg-weekend-bg text-weekend-text` (weekends)
- `hover:bg-gray-100` -> `hover:bg-cream` (workday hover)
- `border-gray-200` -> `border-latte` (card border)
- `bg-white` -> `bg-white` (keep white for card, or use `bg-foam` for contrast)
- `text-gray-600` -> `text-coffee` (day header abbreviations)

Specifically in the dayClasses array:
```
isToday && 'ring-2 ring-today-ring',
isHighlighted && 'bg-highlight',
!isHighlighted && isHoliday && 'bg-holiday-bg text-holiday font-semibold',
!isHighlighted && !isHoliday && isBridge && 'bg-bridge-bg text-bridge',
!isHighlighted && !isHoliday && !isBridge && isVacation && 'bg-vacation-bg text-vacation',
!isHighlighted && !isHoliday && !isBridge && !isVacation && isWeekend && 'bg-weekend-bg text-weekend-text',
!isHighlighted && !isHoliday && !isBridge && !isVacation && !isWeekend && 'hover:bg-cream',
```

Card wrapper: `border border-latte rounded-lg p-3 bg-white shadow-sm`

**Legend.tsx** - Color blocks must match the calendar:
- Holiday block: `bg-red-500` -> `bg-cinnamon`
- Weekend block: `bg-gray-100 border` -> `bg-cream border border-latte`
- Today block: `border-2 border-blue-500` -> `border-2 border-caramel`
- Vacation block: `bg-blue-100 border border-gray-300` -> `bg-vacation-bg border border-latte`

**DayTooltip.tsx** - Dark tooltip and info button:
- Info button: `bg-white text-gray-800 hover:bg-gray-100` -> `bg-foam text-espresso hover:bg-cream`
- Tooltip body: `bg-gray-900 text-white` -> `bg-espresso text-foam`

**FullYearCalendar.tsx** - No color classes to change (it delegates to MonthGrid). Leave unchanged unless it has any hardcoded colors. The year header `text-3xl font-bold` has no color class and will inherit from body (Espresso via foreground). No changes needed.
  </action>
  <verify>
Run `npm run build` to confirm no errors.

Then search for remaining default color classes in the modified files:
- grep MonthGrid.tsx for "bg-red\|bg-blue\|bg-yellow\|bg-gray\|text-red\|text-blue\|text-gray\|ring-blue" (should find ZERO matches)
- grep Legend.tsx for the same pattern (should find ZERO)
- grep DayTooltip.tsx for the same pattern (should find ZERO)
  </verify>
  <done>
MonthGrid day cells render with Coffee semantic colors (Cinnamon holidays, Honey bridges, Caramel vacation, Cream weekends). Legend blocks match calendar colors exactly. DayTooltip uses Espresso background with Foam text. Zero hardcoded default color classes remain in calendar components.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate UI chrome components and page layout to Coffee colors</name>
  <files>
    components/VacationSummary.tsx
    components/AuthHeader.tsx
    components/UserMenu.tsx
    components/MigrationReview.tsx
    app/page.tsx
    public/manifest.json
  </files>
  <action>
Apply Coffee colors to all remaining UI components. VISUAL-ONLY changes. Do NOT modify logic, state, event handlers, or prop types.

**VacationSummary.tsx:**
- Loading state: `bg-white border-gray-200` -> `bg-white border-latte`
- Container: `bg-white border-gray-200` -> `bg-white border-latte`
- Title: `text-gray-800` -> `text-espresso`
- Labels: `text-gray-600` -> `text-coffee`
- Values: `text-gray-800` -> `text-espresso`
- Edit input valid border: `border-blue-400 focus:ring-blue-500` -> `border-caramel focus:ring-caramel`
- Edit input error border: `border-red-400 focus:ring-red-500` -> `border-error focus:ring-error`
- Save button enabled: `bg-green-500 hover:bg-green-600` -> `bg-caramel hover:bg-cinnamon`
- Save button disabled: `bg-gray-300` -> `bg-oat-milk`
- Cancel button: `bg-gray-400 hover:bg-gray-500` -> `bg-cappuccino hover:bg-coffee`
- Edit pencil link: `text-blue-600 hover:text-blue-800` -> `text-mocha hover:text-dark-roast`
- Rollover text: `text-purple-600` -> `text-mocha` (Coffee doesn't have purple; mocha is semantically close for "transferred days")
- Negative remaining: `text-red-600` -> `text-error`
- Positive remaining: `text-green-600` -> `text-success`
- Percentage/divider: `border-gray-200` -> `border-latte`, `text-gray-500` -> `text-cappuccino`
- Error validation text: `text-red-500` -> `text-error`
- Merged row bg: `bg-blue-50` -> `bg-vacation-bg` (in MigrationReview, not here)

**AuthHeader.tsx:**
- Loading skeleton: `bg-gray-200` -> `bg-oat-milk`
- Sign-in button: `text-gray-700 bg-white border-gray-300 hover:bg-gray-50 hover:border-gray-400` -> `text-coffee bg-white border-latte hover:bg-cream hover:border-cappuccino`

**UserMenu.tsx:**
- Display name: `text-gray-700` -> `text-coffee`
- Dropdown: `bg-white border-gray-200` -> `bg-white border-latte`
- Menu item: `text-gray-700 hover:bg-gray-100` -> `text-coffee hover:bg-cream`

**MigrationReview.tsx:**
- Overlay: `bg-black/50` -> keep as-is (modal overlay should be dark)
- Modal: `bg-white` -> keep as-is (white modal)
- Title: no explicit color class, inherits foreground (Espresso) -> fine
- Description: `text-gray-700` -> `text-coffee`
- Data rows: `bg-gray-50` -> `bg-cream`, `text-gray-600` -> `text-coffee`
- Merged row: `bg-blue-50` -> `bg-vacation-bg`, `text-blue-600` -> `text-vacation`
- "Keep cloud" button: `border-gray-300 hover:bg-gray-50` -> `border-latte hover:bg-cream`
- "Merge" button: `bg-blue-600 hover:bg-blue-700` -> `bg-caramel hover:bg-cinnamon text-white`

**app/page.tsx:**
- Subtitle: `text-gray-600` -> `text-coffee`
- No other explicit color classes (the page uses flexbox/layout only)

**public/manifest.json:**
- `"background_color": "#ffffff"` -> `"background_color": "#FAF8F5"` (Foam)
- `"theme_color": "#2563eb"` -> `"theme_color": "#C68E17"` (Caramel)
  </action>
  <verify>
Run `npm run build` to confirm no errors.

Comprehensive search for ANY remaining hardcoded default Tailwind color classes across ALL modified files:
```bash
grep -rn "bg-red-\|bg-blue-\|bg-yellow-\|bg-gray-\|bg-green-\|bg-purple-\|text-red-\|text-blue-\|text-gray-\|text-green-\|text-purple-\|border-red-\|border-blue-\|border-gray-\|ring-blue-\|ring-red-\|focus:ring-blue\|focus:ring-red" components/ app/page.tsx
```
This should return ZERO matches.

Also verify manifest.json:
- grep manifest.json for "C68E17" (should find theme_color)
- grep manifest.json for "FAF8F5" (should find background_color)
  </verify>
  <done>
All UI chrome components use Coffee tokens. VacationSummary uses Espresso/Coffee text, Caramel buttons. AuthHeader and UserMenu use Latte borders and Coffee text. MigrationReview uses Cream rows and Caramel merge button. Page subtitle is Coffee-colored. PWA manifest uses Foam background and Caramel theme. ZERO hardcoded default Tailwind color classes remain anywhere in components/ or app/page.tsx.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` passes without errors
2. `grep -rn "bg-red-\|bg-blue-\|bg-yellow-\|bg-gray-\|bg-green-\|bg-purple-\|text-red-\|text-blue-\|text-gray-\|text-green-\|text-purple-\|border-red-\|border-blue-\|border-gray-\|ring-blue-\|ring-red-" components/ app/page.tsx` returns ZERO matches
3. Legend color blocks visually correspond to MonthGrid day cell colors
4. manifest.json contains Coffee colors
5. No component behavior has changed (only className attributes modified)
</verification>

<success_criteria>
- Every component in components/ uses Coffee theme tokens exclusively
- Zero hardcoded default Tailwind color classes remain in components/ or app/page.tsx
- Build passes with no errors
- Component logic, props, state, and event handlers are completely unchanged
- PWA manifest uses Coffee Foam background and Caramel theme color
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-ux-infrastructure-feedback-loop/05.1-02-SUMMARY.md`
</output>
