---
phase: 05.2-seo-improvements-and-layout-restructuring
plan: 01
subsystem: seo
tags: [constants, metadata, date-fns, type-safety, seo]

# Dependency graph
requires:
  - phase: 01-04
    provides: "Dynamic year calculation using date-fns"
  - phase: 05.1-01
    provides: "Coffee theme constants and app metadata"
provides:
  - Centralized text constants in lib/constants.ts
  - Dynamic year-based SEO metadata via generateMetadata
  - Type-safe constant exports for reusability
affects: [05.2-03, 05.2-04, 05.2-06, testing]

# Tech tracking
tech-stack:
  added: []
  patterns: ["Shared constants file pattern with flat named exports", "Dynamic metadata generation with date-fns getYear"]

key-files:
  created: ["lib/constants.ts"]
  modified: ["app/layout.tsx"]

key-decisions:
  - "Use flat named exports (not nested objects) in constants.ts for tree-shaking optimization"
  - "PAGE_TITLE and META_DESCRIPTION are functions accepting year parameter for dynamic content"
  - "Use generateMetadata() function export instead of static metadata export"
  - "LEGEND_LABELS exported as const for type safety"

patterns-established:
  - "Text constants: Use function signatures for dynamic content, const assertion for static objects"
  - "SEO metadata: generateMetadata function for dynamic year-based content"

# Metrics
duration: 1min 11sec
completed: 2026-02-07
---

# Phase 05.2 Plan 01: Shared Constants & Dynamic SEO Summary

**Centralized Bulgarian text constants with dynamic year-based SEO metadata using date-fns**

## Performance

- **Duration:** 1 min 11 sec
- **Started:** 2026-02-07T15:09:14Z
- **Completed:** 2026-02-07T15:10:25Z
- **Tasks:** 2
- **Files modified:** 2

## Accomplishments
- Created lib/constants.ts with all shared text strings for single source of truth
- Implemented generateMetadata() for dynamic year calculation in page title and description
- Eliminated hardcoded "2026" from SEO metadata
- Established type-safe constant exports with TypeScript const assertion

## Task Commits

Each task was committed atomically:

1. **Task 1: Create shared constants file** - `530fb55` (chore)
2. **Task 2: Update layout.tsx with dynamic SEO metadata** - `f27f691` (feat)

## Files Created/Modified
- `lib/constants.ts` - Centralized Bulgarian text constants with PAGE_TITLE, META_DESCRIPTION (functions), LEGEND_LABELS (const), APP_NAME, APP_SHORT_NAME for reusability across components
- `app/layout.tsx` - Replaced static metadata export with generateMetadata() function using getYear from date-fns for dynamic year calculation

## Decisions Made

**1. Flat named exports for tree-shaking**
- Used flat named exports (not nested objects) in constants.ts
- Rationale: Better tree-shaking in production builds, clearer imports

**2. Function signatures for dynamic content**
- PAGE_TITLE and META_DESCRIPTION are functions accepting year parameter
- Rationale: Enables dynamic year calculation without repeated date-fns imports in consumers

**3. generateMetadata function pattern**
- Used Next.js generateMetadata() function export instead of static metadata
- Rationale: Next.js convention for dynamic metadata, enables runtime year calculation

**4. Type safety with const assertion**
- LEGEND_LABELS exported as const for TypeScript type narrowing
- Rationale: Prevents accidental mutations, enables type inference for literal values

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None - all tasks completed without problems.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

**Ready for next plans:**
- lib/constants.ts can be imported by any component needing shared text
- PAGE_SUBTITLE and PAGE_DESCRIPTION available for plan 05.2-03 (hero section)
- LEGEND_LABELS available for plan 05.2-06 (legend migration)
- Dynamic SEO metadata working correctly for current year

**No blockers:** All shared constants exported and tested.

---
*Phase: 05.2-seo-improvements-and-layout-restructuring*
*Completed: 2026-02-07*
