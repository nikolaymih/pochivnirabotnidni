# Phase 5.2: SEO Improvements & Layout Restructuring - Context

**Gathered:** 2026-02-07
**Status:** Ready for planning

<domain>
## Phase Boundary

Restructure the page layout into a three-column desktop view (left sidebar | calendar | right sidebar), improve SEO metadata, extract reusable text constants, add official holiday list and school vacation display from the OpenHolidays API, resize the calendar for better proportions, fix legend/calendar color issues, add school holiday display, and fix tooltip/weekend holiday bugs.

</domain>

<decisions>
## Implementation Decisions

### Left sidebar content & data sources
- Display official holidays in format: "1 Януари 2026 – Нова година" (date + dynamic year + name)
- Display school vacations in format: "4 Април – 13 Април – Пролетна ваканция" (full month name, date range + name)
- Two separate sections: official holidays list first, then "Ученически ваканции" section below
- Data comes from OpenHolidays API — both public holidays AND school holidays (API supports Bulgaria school holidays from 2020)
- Must use live API data, NOT hardcoded fallback objects
- Left sidebar shows holidays for the currently selected year (dynamic)

### Layout & responsive behavior
- Desktop: Left sidebar | Calendar | Right sidebar (three-column layout)
- Both sidebars sticky on desktop (stay visible while scrolling calendar)
- Both sidebars vertically aligned with the first month of the calendar (not starting from page top)
- Calendar per-month cell: max-width 650px, max-height 320px, scales down on smaller screens
- Mobile stacking order top-to-bottom: Title/description → Right sidebar → Left sidebar → Calendar

### Header simplification & component relocation
- Header contains ONLY: app title/logo + Google auth (login/avatar)
- VacationSummary stays in right sidebar (already there), but right sidebar must align with first calendar month, not start from page top
- Year selector moves to above the calendar, horizontally centered
- Page title + description text stays above the calendar in main content area
- On mobile: title/description appears above everything (before right sidebar, left sidebar, calendar)

### Text constants & SEO content
- Shared constants file: `lib/constants.ts`
- Page title: "Празнични, неучебни и неработни дни през {year} година" (dynamic year)
- Meta description: "Запознайте се с официалните празници, неучебните и неработните дни. Разберете кога се падат почивните дни и как най-ефективно да комбинирате отпуск с празници за по-дълги почивки." (dynamic year in text)
- Page subtitle/description: "Календар с български празници и работни дни за планиране на вашата година."
- All repeated text in page.tsx must be extracted to constants
- Tests must reference same constants to prevent breakage on text changes
- Both meta description and page title year are dynamic (change with year selector)

### Legend & school holiday display
- Add new legend entry: "Неучебни дни / Ученически ваканции" with a teal/blue-green color (new distinct color, not existing Coffee tokens)
- Add missing legend entry: "Предложение за почивка" (bridge day suggestions)
- School holidays shown on calendar cells with the new teal color
- When a day is both school holiday AND personal vacation: show both (split cell or small indicator) — vacation color primary with school holiday indicator

### Day type priority system
Priority order (highest to lowest) for calendar cell coloring:
1. Официален празник (cinnamon) — always wins
2. Лична почивка (caramel) — user selection overrides suggestions
3. Неучебни дни (teal) — school holidays
4. Предложение за почивка (honey) — bridge day suggestions
5. Почивен ден (cream) — regular weekends

### Holiday color mismatch fix
- Legend color and calendar cell color for Официален празник must be identical — same solid cinnamon color, no opacity difference
- Use white/light text on solid cinnamon background for day numbers to ensure readability
- No lighter "holiday-bg" variant — solid color in both legend and cells

### Weekend holiday handling
- When an official holiday falls on Saturday or Sunday: show the holiday color on Monday ONLY (not on the weekend day)
- Bulgaria observes the following Monday as the compensatory day off
- The weekend day (Sat/Sun) stays as normal weekend color (cream)
- Monday tooltip: "Нова година (почивен ден)" — holiday name + note it's a substitute day
- Currently broken: both Sunday and Monday show as holiday — must fix to Monday only

### Tooltip behavior fix
- Tooltips are DESKTOP HOVER ONLY — show on mouse hover, not on click/tap
- NO tooltips on mobile at all — mobile tap is exclusively for vacation selection
- This fixes the current conflict where pointer events for drag selection broke tooltips
- Holiday info on mobile is available via the left sidebar instead of tooltips

### Claude's Discretion
- Exact teal/blue-green hex value for school holidays (must fit Coffee palette)
- Exact sidebar widths and proportions
- How to fetch school holidays from OpenHolidays API (endpoint/params)
- Exact responsive breakpoints for three-column → single-column transition
- Whether to use CSS Grid or Flexbox for the three-column layout
- How to handle the constants file structure (flat exports vs grouped object)
- Split cell / indicator design for vacation + school holiday overlap

</decisions>

<specifics>
## Specific Ideas

- User manually changed the title to "Празнични, неучебни и неработни дни през 2026 година" — this is the exact title wanted
- User added subtitle: "Календар с български празници и работни дни за планиране на вашата година."
- User added description text: "Запознайте се с официалните празници, неучебните и неработните дни. Разберете кога се падат почивните дни и как най-ефективно да комбинирате отпуск с празници за по-дълги почивки."
- Holiday list example: "1 януари 2026 – Нова година", "3 март – Ден на Освобождението на България от османско робство"
- School vacation example: "4 Април – 13 Април – Пролетна ваканция за I - XI клас"
- OpenHolidays API docs confirm: "Bulgaria (public holidays and school holidays from 2020)"
- Current page.tsx has repeated/duplicated text that needs to be consolidated
- Legend currently missing "Предложение за почивка" entry
- Holiday color in legend visually doesn't match holiday color in calendar cells (opacity/shade difference)
- Weekend holidays currently incorrectly show on both the weekend day AND Monday

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 05.2-seo-improvements-and-layout-restructuring*
*Context gathered: 2026-02-07*
