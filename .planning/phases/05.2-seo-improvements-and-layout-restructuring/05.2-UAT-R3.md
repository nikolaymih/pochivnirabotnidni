---
status: complete
phase: 05.2-seo-improvements-and-layout-restructuring
source: R2 gap fixes (commit 2736222)
started: 2026-02-08T15:00:00Z
updated: 2026-02-08T16:00:00Z
round: 3
---

## Current Test
<!-- OVERWRITE each test - shows where we are -->

[testing complete]

## Tests

### 1. Page Title and Description Visible
expected: Above the year selector (← 2026 →) in the main content area (not sidebars or header), you should see an H1 title "Празнични, неучебни и неработни дни през 2026 година" and a description paragraph below it. Same width as calendar on both desktop and mobile. Header has breathing room below it.
result: issue
reported: "H1 title needs more bottom margin from ← 2026 → (too close). Title/description width is bigger than the calendar — needs to match calendar width. Header needs 50px margin-bottom on desktop, 20px on mobile."
severity: cosmetic

### 2. Left Sidebar Scroll-Then-Stick
expected: On desktop, the left sidebar (Официални празници + Ученически ваканции cards) scrolls naturally with the page. When the bottom of the Ученически ваканции card reaches the viewport bottom, the sidebar becomes sticky and stays visible while you continue scrolling the calendar.
result: pass

### 3. Лятна ваканция in Sidebar But Not Calendar
expected: The Ученически ваканции sidebar card shows ALL school holidays INCLUDING Лятна ваканция entries (with grade levels). But the calendar does NOT show teal highlighting for summer vacation months. Only shorter school holidays (Коледна, Пролетна, Междусрочна, etc.) appear as teal on the calendar.
result: pass

### 4. December 2026 School Holidays in Calendar
expected: December 24-31, 2026 should show teal highlighting for Коледна ваканция (weekdays only — Dec 24 Thu, 25 Fri, 28 Mon, 29 Tue, 30 Wed, 31 Thu). Weekends remain cream/regular.
result: pass

### 5. Mobile Tooltip Icon Matches Desktop
expected: On mobile, holiday cells show a small "i" icon (not "!") in the top-right corner with a light foam/cream background (matching the desktop icon style). Tapping it toggles the tooltip. Desktop hover behavior unchanged.
result: pass

### 6. Mobile Content Padding Consistent
expected: On mobile, the calendar, legend, vacation summary, and sidebar cards all have consistent horizontal padding — no section appears wider or narrower than others. Calendar no longer has extra padding causing misalignment.
result: pass

### 7. Vacation Editing Disabled for Non-Current Years
expected: Navigate to a past year (e.g., ← 2025). Drag selection should NOT work — tapping calendar cells should not mark vacation days. The edit icon (pencil) next to "Общо дни за отпуск" in the Лична Почивка card should be hidden. Navigate back to 2026 — drag selection and edit icon should work normally.
result: issue
reported: "Drag selection disabled works. But: (1) Duplicate key React error in LeftSidebar.tsx — 'Encountered two children with the same key 2027-05-01' when viewing other years because key={holiday.date} has duplicates. (2) School holidays not fetched for non-2026 years — sidebar doesn't show Ученически ваканции and calendar doesn't show teal highlighting for other years. Holidays work okay."
severity: major

### 8. Edit Icon Visible for Current Year
expected: On the current year (2026), the pencil edit icon next to the vacation total is clearly visible — it has a subtle background/border making it easy to spot and click.
result: pass

### 9. Tooltip Not Clipped by Calendar
expected: Holiday tooltips (the dark popup showing holiday name and date) are NOT clipped or cut off by the calendar month grid boundary. Even for cells at the edge of a month grid, the tooltip extends beyond the grid container and is fully readable.
result: issue
reported: "Desktop works fine. On mobile, tooltips on Monday/Tuesday cells are clipped because the screen isn't wide enough — tooltip extends beyond left edge. Also, the month grid height (max-h-[320px]) is not enough — days 30 and 31 are cut off/outside the calendar for months with 6 rows. Need to increase max height to fit all dates."
severity: minor

### 10. Previous Passing Tests Still Work
expected: Quick regression check: (a) Legend shows plain cinnamon square for holidays (no П text), (b) Vacation color is green, distinct from bridge honey/amber, (c) School holidays only on weekdays (not weekends), (d) Weekend holidays show cinnamon on both the weekend day AND transferred Monday, (e) Bridge+school overlap shows diagonal split cell.
result: pass
note: "(a) was intentionally changed in previous fix round. All other items (b-e) confirmed working."

## Summary

total: 10
passed: 7
issues: 3
pending: 0
skipped: 0

## Gaps

- truth: "Page title and description visible above year selector, matching calendar width, with proper header spacing"
  status: failed
  reason: "User reported: H1 title needs more bottom margin from year selector (too close). Title/description width is bigger than calendar — must match. Header needs 50px margin-bottom on desktop, 20px on mobile."
  severity: cosmetic
  test: 1
  root_cause: ""
  artifacts: []
  missing: []

- truth: "No React key errors when viewing other years, school holidays fetched and displayed for all years"
  status: failed
  reason: "User reported: (1) Duplicate key React error in LeftSidebar.tsx — key={holiday.date} has duplicates (e.g., 2027-05-01) when viewing other years. (2) School holidays not fetched for non-2026 years — sidebar and calendar missing school holiday data for other years. Holidays work okay."
  severity: major
  test: 7
  root_cause: ""
  artifacts: []
  missing: []

- truth: "Tooltips not clipped on mobile for left-edge cells, month grid height fits all dates including 6-row months"
  status: failed
  reason: "User reported: Desktop tooltips fine. Mobile tooltips on Monday/Tuesday cells clipped by screen edge. Month grid max-h-[320px] too small — days 30 and 31 cut off for months with 6 rows. Need larger max height."
  severity: minor
  test: 9
  root_cause: ""
  artifacts: []
  missing: []
