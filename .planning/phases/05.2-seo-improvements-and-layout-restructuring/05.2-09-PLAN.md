---
phase: 05.2-seo-improvements-and-layout-restructuring
plan: 09
type: execute
wave: 1
depends_on: []
files_modified:
  - app/page.tsx
  - components/LeftSidebar.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "No visible h1 title rendered on the page — title exists only in browser tab via metadata"
    - "Left sidebar has TWO separate card divs with gap between them"
    - "Left sidebar cards have shadow-sm and match Legend/VacationSummary card styling"
    - "No scrollbar on left sidebar — uses same sticky behavior as right sidebar"
    - "Three-column layout is centered with mx-auto and max-width"
    - "On mobile, all content below header fits within same max-width as calendar"
  artifacts:
    - path: "app/page.tsx"
      provides: "Layout without h1, centered three-column, mobile max-width wrapper"
      contains: "mx-auto"
    - path: "components/LeftSidebar.tsx"
      provides: "Two separate styled cards for holidays and school vacations"
      contains: "shadow-sm"
  key_links:
    - from: "app/page.tsx"
      to: "components/LeftSidebar.tsx"
      via: "rendered in left column"
      pattern: "LeftSidebar"
    - from: "app/page.tsx"
      to: "components/Legend.tsx"
      via: "rendered in right column"
      pattern: "Legend"
---

<objective>
Remove visible page title, restructure layout to match wireframe (centered three-column with two left sidebar cards), and add mobile max-width wrapper.

Purpose: Close UAT gaps T1 (remove visible title), T2 (layout restructuring with 2 cards, shadow, centering), and T12 (mobile width wrapper). This is the main layout fix bringing the UI in line with the user's wireframe.
Output: Updated page.tsx with correct layout structure, updated LeftSidebar.tsx with two separate cards.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/page.tsx
@components/LeftSidebar.tsx
@components/Legend.tsx
@components/VacationSummary.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Split LeftSidebar into two separate styled cards</name>
  <files>components/LeftSidebar.tsx</files>
  <action>
  Restructure LeftSidebar.tsx to render TWO separate card divs instead of one combined container.

  **Current:** Single `<div className="border rounded-lg p-4 bg-white">` wrapping both sections.

  **Target:** Two separate card divs with consistent styling matching Legend and VacationSummary cards:

  ```tsx
  return (
    <>
      {/* Card 1: Official Holidays */}
      <div className="p-4 bg-white rounded-lg border border-latte shadow-sm">
        <h3 className="font-semibold text-espresso mb-3">Официални празници</h3>
        <ul className="space-y-2">
          {yearHolidays.map((holiday) => {
            // ... existing holiday rendering code unchanged ...
          })}
        </ul>
      </div>

      {/* Card 2: School Vacations */}
      {yearSchoolHolidays.length > 0 && (
        <div className="mt-4 p-4 bg-white rounded-lg border border-latte shadow-sm">
          <h3 className="font-semibold text-espresso mb-3">Ученически ваканции</h3>
          <ul className="space-y-2">
            {yearSchoolHolidays.map((schoolHoliday, index) => {
              // ... existing school holiday rendering code unchanged ...
            })}
          </ul>
        </div>
      )}
    </>
  );
  ```

  **Key styling changes:**
  - Each card: `p-4 bg-white rounded-lg border border-latte shadow-sm` (matches Legend and VacationSummary styling)
  - `mt-4` gap between the two cards
  - Remove the old combined wrapper div
  - Use React Fragment `<>...</>` as the return wrapper since we now have two sibling elements
  - Remove `mb-6` from the holidays `<ul>` — no longer needed since cards are separate

  **Do NOT change:**
  - The holiday date formatting logic
  - The capitalizeMonth function
  - The school holiday data filtering logic
  - Any of the inner list item rendering
  </action>
  <verify>
  - Grep LeftSidebar.tsx for "shadow-sm" — should appear twice (once per card)
  - Grep LeftSidebar.tsx for "border-latte" — should appear twice
  - Run `npm run build` to confirm no build errors
  </verify>
  <done>
  - LeftSidebar renders two separate card divs with visual gap
  - Both cards have shadow-sm and border-latte matching Legend/VacationSummary
  - Internal rendering logic unchanged
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove visible title, center layout, add mobile wrapper</name>
  <files>app/page.tsx</files>
  <action>
  Three changes to page.tsx:

  **1. Remove visible h1 title (T1):**
  - Mobile layout (around line 43-46): Remove the entire `<div className="flex justify-between items-start mb-4">` block containing the h1 and AuthHeader. Replace with just `<AuthHeader />` right-aligned.
  - Also remove the `<p>` subtitle line (line 47) from mobile.
  - Desktop layout (around line 73-79): Remove the entire header block containing the h1 and subtitle. Replace with a simple right-aligned AuthHeader bar.

  The title remains as SEO metadata in layout.tsx via generateMetadata() — it is NOT removed from the browser tab, only from the visible page.

  **2. Center three-column layout (T2):**
  - Desktop three-column container (line 82): Change from `<div className="flex gap-4 px-4">` to `<div className="flex gap-6 px-4 mx-auto max-w-[1400px]">`
  - This centers the columns and prevents them from stretching too wide on ultra-wide screens.
  - Left sidebar wrapper (line 84): Remove `overflow-y-auto` from the sticky div. Change from `<div className="sticky top-4 max-h-[calc(100vh-2rem)] overflow-y-auto">` to `<div className="sticky top-4">`
  - The two cards from LeftSidebar will stack naturally without needing overflow scroll.

  **3. Add mobile max-width wrapper (T12):**
  - Wrap the mobile layout content (everything inside `<div className="lg:hidden">`) in a max-width container:
  ```tsx
  <div className="lg:hidden">
    {/* Header: full width */}
    <div className="flex justify-end p-4 pb-2">
      <AuthHeader />
    </div>

    {/* Content: constrained to calendar width */}
    <div className="max-w-[650px] mx-auto px-4">
      {/* Right sidebar content first on mobile */}
      <Legend />
      <VacationSummary />

      {/* Left sidebar content */}
      <div className="mt-4">
        <LeftSidebar holidays={holidays} schoolHolidays={schoolHolidays} year={currentYear} />
      </div>

      {/* Year selector + Calendar */}
      <div className="mt-4">
        <YearSelector year={currentYear} />
        <FullYearCalendarWrapper
          year={currentYear}
          holidays={holidays}
          schoolHolidayDates={schoolHolidayDates}
        />
      </div>
    </div>
  </div>
  ```

  **Desktop header replacement:**
  ```tsx
  {/* Desktop header: just auth button */}
  <div className="flex justify-end p-4 pb-2 max-w-[1400px] mx-auto">
    <AuthHeader />
  </div>
  ```

  **Full desktop layout structure:**
  ```tsx
  <div className="hidden lg:block">
    {/* Header: auth button right-aligned */}
    <div className="flex justify-end p-4 pb-2 max-w-[1400px] mx-auto">
      <AuthHeader />
    </div>

    {/* Three-column layout - centered */}
    <div className="flex gap-6 px-4 mx-auto max-w-[1400px]">
      {/* Left Sidebar */}
      <div className="w-72 flex-shrink-0">
        <div className="sticky top-4">
          <LeftSidebar holidays={holidays} schoolHolidays={schoolHolidays} year={currentYear} />
        </div>
      </div>

      {/* Center: Year selector + Calendar */}
      <div className="flex-1 min-w-0">
        <YearSelector year={currentYear} />
        <FullYearCalendarWrapper
          year={currentYear}
          holidays={holidays}
          schoolHolidayDates={schoolHolidayDates}
        />
      </div>

      {/* Right Sidebar */}
      <div className="w-72 flex-shrink-0">
        <div className="sticky top-4">
          <Legend />
          <VacationSummary />
        </div>
      </div>
    </div>
  </div>
  ```

  **Important:** Keep the PAGE_SUBTITLE and PAGE_DESCRIPTION imports — they may be used elsewhere or needed later. But remove their usage from the rendered JSX. The PAGE_TITLE import can be removed since it's no longer rendered (it's used in layout.tsx metadata instead).

  Actually, check if PAGE_TITLE is used elsewhere in this file before removing the import. If only used in the h1 elements being removed, remove the import too.
  </action>
  <verify>
  - Grep page.tsx for "<h1" — should find ZERO matches
  - Grep page.tsx for "max-w-\[1400px\]" — should find matches for centering
  - Grep page.tsx for "max-w-\[650px\]" — should find match in mobile wrapper
  - Grep page.tsx for "overflow-y-auto" — should find ZERO matches in left sidebar
  - Run `npm run build` to confirm no build errors
  </verify>
  <done>
  - No visible h1 title on the page (neither mobile nor desktop)
  - Desktop layout centered with max-w-[1400px] mx-auto
  - Left sidebar has no scrollbar (no overflow-y-auto)
  - Mobile content constrained to max-w-[650px] matching calendar width
  - AuthHeader displayed right-aligned in both layouts
  - Build passes cleanly
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- No `<h1>` elements in page.tsx
- LeftSidebar renders two separate card elements with shadow-sm
- Desktop layout centered with max-width
- Mobile layout has shared max-width wrapper
- No overflow-y-auto on left sidebar
</verification>

<success_criteria>
1. Page title not visible anywhere on the page (only in browser tab metadata)
2. Left sidebar shows two separate styled cards with gap
3. Cards have shadow-sm and border-latte matching right sidebar cards
4. No scrollbar on left sidebar
5. Three-column layout centered, doesn't stretch on wide screens
6. Mobile sections match calendar width
7. Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/05.2-seo-improvements-and-layout-restructuring/05.2-09-SUMMARY.md`
</output>
