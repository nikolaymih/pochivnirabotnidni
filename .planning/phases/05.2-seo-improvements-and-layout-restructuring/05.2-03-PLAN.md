---
phase: 05.2-seo-improvements-and-layout-restructuring
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - app/globals.css
  - components/Legend.tsx
autonomous: true

must_haves:
  truths:
    - "Teal color tokens exist for school holidays (primary + light bg)"
    - "Legend shows 6 entries: Официален празник, Неучебни дни, Предложение за почивка, Лична почивка, Уикенд, Днес"
    - "Legend holiday color swatch uses solid cinnamon (same as calendar cells will use)"
    - "Bridge day suggestion entry exists in legend with honey/bridge-bg color"
    - "School holiday entry exists in legend with teal/school-bg color"
  artifacts:
    - path: "app/globals.css"
      provides: "Teal color tokens for school holidays"
      contains: "--color-teal"
    - path: "components/Legend.tsx"
      provides: "Complete legend with all 6 day types"
      min_lines: 30
  key_links:
    - from: "components/Legend.tsx"
      to: "app/globals.css"
      via: "Tailwind utility classes (bg-teal, bg-school-bg, bg-bridge-bg)"
      pattern: "bg-school-bg|bg-teal|bg-bridge-bg"
---

<objective>
Add teal color tokens for school holidays to the CSS theme and update the Legend component to show all 6 day types with correct colors.

Purpose: Establish the visual identity for school holidays and fix the incomplete legend (missing bridge day and school holiday entries). Fix the holiday color mismatch between legend and calendar cells.

Output: Teal color tokens in globals.css, complete Legend component with 6 entries.
</objective>

<execution_context>
@/home/nikolaymih11/.claude/get-shit-done/workflows/execute-plan.md
@/home/nikolaymih11/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/05.2-seo-improvements-and-layout-restructuring/05.2-CONTEXT.md
@.planning/phases/05.2-seo-improvements-and-layout-restructuring/05.2-RESEARCH.md
@app/globals.css
@components/Legend.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add teal color tokens to globals.css</name>
  <files>app/globals.css</files>
  <action>
  Add teal color tokens to the `@theme` block in `app/globals.css`.

  Add these in the Calendar Aliases section (after existing calendar aliases):
  ```css
  --color-teal: #CBD0B5;
  --color-school-bg: #CBD0B5;
  ```

  Rationale: #4A9B8E is a muted, earthy teal that fits the Coffee theme warmth. Not too saturated, distinct from existing caramel/cinnamon/honey. The light variant #E5F3F0 follows the same pattern as other -bg colors (holiday-bg, bridge-bg, vacation-bg).

  Place them AFTER the `--color-highlight` line in the Calendar Aliases section. Do NOT modify any existing color values.
  </action>
  <verify>CSS is valid. Run `npm run build` to verify Tailwind processes the new tokens. Classes `bg-teal`, `text-teal`, `bg-school-bg` should be available.</verify>
  <done>globals.css has --color-teal and --color-school-bg tokens in the @theme block, enabling bg-teal, text-teal, bg-school-bg Tailwind utilities</done>
</task>

<task type="auto">
  <name>Task 2: Update Legend with all 6 day types</name>
  <files>components/Legend.tsx</files>
  <action>
  Rewrite the Legend component to include all 6 day types in the correct priority order.

  The legend entries should be (in this order, matching the day type priority from CONTEXT.md):

  1. **Официален празник** - `bg-cinnamon` swatch with white text "П" inside (to show this is how holidays look in calendar - solid dark background with white text). This fixes the mismatch: legend must show the SAME solid cinnamon that calendar cells will use.

  2. **Неучебни дни / Ученически ваканции** - `bg-school-bg border border-teal` swatch (light teal background matching school holiday cells)

  3. **Предложение за почивка** - `bg-bridge-bg border border-latte` swatch (light honey background matching bridge day cells)

  4. **Лична почивка** - `bg-vacation-bg border border-latte` swatch (existing, unchanged)

  5. **Уикенд** - `bg-cream border border-latte` swatch (existing, unchanged)

  6. **Днес** - `border-2 border-caramel` swatch (existing, unchanged)

  Implementation:
  ```tsx
  export default function Legend() {
    return (
      <div className="border rounded-lg p-4">
        <h3 className="font-semibold mb-3">Легенда</h3>
        <div className="space-y-2">
          {/* 1. Official Holiday - solid cinnamon with white text */}
          <div className="flex items-center gap-2">
            <div className="w-6 h-6 bg-cinnamon text-white text-xs font-semibold flex items-center justify-center rounded">П</div>
            <span className="text-sm">Официален празник</span>
          </div>
          {/* 2. School Holidays */}
          <div className="flex items-center gap-2">
            <div className="w-6 h-6 bg-school-bg border border-teal rounded"></div>
            <span className="text-sm">Неучебни дни / Ученически ваканции</span>
          </div>
          {/* 3. Bridge Day Suggestion */}
          <div className="flex items-center gap-2">
            <div className="w-6 h-6 bg-bridge-bg border border-latte rounded"></div>
            <span className="text-sm">Предложение за почивка</span>
          </div>
          {/* 4. Personal Vacation */}
          <div className="flex items-center gap-2">
            <div className="w-6 h-6 bg-vacation-bg border border-latte rounded"></div>
            <span className="text-sm">Лична почивка</span>
          </div>
          {/* 5. Weekend */}
          <div className="flex items-center gap-2">
            <div className="w-6 h-6 bg-cream border border-latte rounded"></div>
            <span className="text-sm">Уикенд</span>
          </div>
          {/* 6. Today */}
          <div className="flex items-center gap-2">
            <div className="w-6 h-6 border-2 border-caramel rounded"></div>
            <span className="text-sm">Днес</span>
          </div>
        </div>
      </div>
    );
  }
  ```

  Key changes:
  - Holiday swatch now shows "П" with white text on solid cinnamon (matches how holidays will look in calendar after Plan 04 fixes)
  - Added school holiday entry with teal colors
  - Added bridge day suggestion entry with bridge-bg color
  - Reordered to match day type priority system
  - Component remains a Server Component (no 'use client')
  </action>
  <verify>Component renders without errors. Run `npm run build` to verify. Visually check that all 6 entries appear in correct order.</verify>
  <done>Legend shows 6 entries in priority order, holiday swatch matches solid cinnamon calendar appearance, school holidays use teal, bridge suggestions use honey/bridge-bg</done>
</task>

</tasks>

<verification>
1. `app/globals.css` contains `--color-teal: #4A9B8E` and `--color-school-bg: #E5F3F0`
2. `components/Legend.tsx` renders 6 legend entries
3. Holiday swatch uses solid `bg-cinnamon` with white text (not light `bg-holiday-bg`)
4. School holiday swatch uses `bg-school-bg` with teal border
5. Bridge day suggestion swatch uses `bg-bridge-bg`
6. Build succeeds without errors
</verification>

<success_criteria>
- Teal color tokens available as Tailwind utilities
- Legend is complete with all 6 day types
- Holiday color in legend matches what calendar cells will show (solid cinnamon)
- No existing functionality broken
</success_criteria>

<output>
After completion, create `.planning/phases/05.2-seo-improvements-and-layout-restructuring/05.2-03-SUMMARY.md`
</output>
