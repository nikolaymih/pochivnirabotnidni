---
phase: 05.2-seo-improvements-and-layout-restructuring
plan: 07
subsystem: ui
tags: [legend, vacation-color, tooltip, mobile, coffee-theme]

# Dependency graph
requires:
  - phase: 05.2-03
    provides: Legend component with all 6 day types and cinnamon holiday swatch
  - phase: 05.2-04
    provides: DayTooltip with desktop-only hover behavior
  - phase: 05.1-02
    provides: Coffee theme tokens and calendar color aliases
provides:
  - Legend swatch simplified (solid color block, no text)
  - Vacation color changed from amber (#C68E17) to sea green (#2E8B57) for clear bridge distinction
  - DayTooltip with dual desktop hover + mobile click-toggle behavior
  - Mobile tooltip uses stopPropagation to prevent drag selection interference
affects:
  - Any component using bg-vacation or bg-vacation-bg will now render green instead of amber
  - Mobile users can now see holiday tooltip details (previously hidden)

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Dual tooltip pattern: desktop hover (hidden lg:block) + mobile click-toggle (lg:hidden)"
    - "Mobile tooltip click uses stopPropagation on both onClick and onPointerDown to prevent drag selection"
    - "Legend swatches as plain color blocks without text (cleaner visual)"

key-files:
  created: []
  modified:
    - components/Legend.tsx: Removed text from holiday swatch (solid color block only)
    - app/globals.css: Updated vacation color tokens from amber to sea green
    - components/DayTooltip.tsx: Added mobile click-toggle tooltip alongside existing desktop hover

key-decisions:
  - "Legend holiday swatch is plain solid bg-cinnamon block without 'P' text"
  - "Vacation color changed from #C68E17 (amber, too close to bridge honey) to #2E8B57 (sea green)"
  - "Vacation background changed from #F9EED4 to #D4EDDA (light green)"
  - "--color-caramel (#C68E17) left unchanged - it is the accent/interactive color, not vacation"
  - "Mobile tooltip uses '!' icon (bg-cinnamon/70, w-3.5 h-3.5) distinct from desktop 'i' icon"
  - "Mobile tooltip onPointerDown calls stopPropagation to prevent MonthGrid drag selection"

patterns-established:
  - "Dual responsive tooltip: separate DOM elements for desktop (hover) and mobile (click) with responsive visibility classes"
  - "Mobile interactive elements must stopPropagation on onPointerDown to coexist with parent drag handlers"

# Metrics
duration: 1m 30s
completed: 2026-02-08
---

# Phase 5.2 Plan 07: Legend Swatch Fix, Vacation Color Update, Mobile Tooltip

**Removed text from legend holiday swatch, changed vacation color from amber to sea green for clear bridge distinction, added mobile click-toggle tooltip alongside desktop hover**

## Performance

- **Duration:** ~1m 30s
- **Started:** 2026-02-08T01:04:48Z
- **Tasks:** 3 (legend fix + color update + tooltip rewrite)
- **Files modified:** 3

## Accomplishments

- Legend holiday swatch simplified to plain solid color block (removed "P" text that looked out of place)
- Vacation color tokens updated from amber (#C68E17/#F9EED4) to sea green (#2E8B57/#D4EDDA) for clear visual distinction from bridge/honey amber
- DayTooltip now has dual behavior: desktop hover (existing) + mobile click-toggle (new)
- Mobile tooltip icon uses "!" with cinnamon/70 background, smaller size (w-3.5 h-3.5) for compact display
- Mobile tooltip click handler uses stopPropagation on both onClick and onPointerDown to prevent interference with MonthGrid drag selection
- Build verification passed with zero errors

## Files Created/Modified

- `components/Legend.tsx` - Removed text content from holiday swatch div, simplified to plain `bg-cinnamon rounded` block
- `app/globals.css` - Changed `--color-vacation` from `#C68E17` to `#2E8B57` and `--color-vacation-bg` from `#F9EED4` to `#D4EDDA`
- `components/DayTooltip.tsx` - Complete rewrite: dual desktop hover + mobile click-toggle with separate state variables and DOM elements

## Decisions Made

**Vacation color change to sea green:**
- Old vacation color (#C68E17) was identical to --color-caramel and too close to bridge/honey (#EB9605)
- New sea green (#2E8B57) provides completely different hue from all amber/brown Calendar Aliases
- Brightness level comparable to cinnamon (#B5651D) as requested
- --color-caramel left unchanged since it serves as accent/interactive color throughout the UI

**Legend swatch simplification:**
- Removed "P" text from holiday swatch - legend swatches should be uniform color blocks
- Other swatches (school, bridge, vacation, weekend, today) were already plain blocks

**Mobile tooltip design:**
- Separate DOM element with `lg:hidden` instead of trying to make one element work for both
- Mobile uses "!" icon (more noticeable on small screens) vs desktop "i"
- Mobile button slightly smaller (w-3.5 h-3.5) since it appears on compact calendar cells
- Critical: onPointerDown handler calls stopPropagation() to prevent parent MonthGrid pointer handlers from firing during drag selection

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None - all changes applied cleanly, build passed without errors.

## Next Phase Readiness

**Ready for Plan 05.2-08:**
- All three visual/interaction fixes complete
- Vacation color now clearly distinct from bridge suggestions
- Mobile users have access to holiday details via tooltip

---
*Phase: 05.2-seo-improvements-and-layout-restructuring*
*Completed: 2026-02-08*
