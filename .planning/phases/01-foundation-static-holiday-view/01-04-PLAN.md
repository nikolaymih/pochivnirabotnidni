---
phase: 01-foundation-static-holiday-view
plan: 04
type: execute
wave: 4
depends_on: [01-03]
files_modified:
  - app/layout.tsx
  - components/Calendar.tsx
  - components/Legend.tsx
  - components/DayTooltip.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "User sees Bulgarian Cyrillic text in all UI elements"
    - "Day headers display Bulgarian abbreviations (Пн, Вт, Ср, etc.)"
    - "Month name displays in Bulgarian (Януари, Февруари, etc.)"
    - "Legend labels display in Bulgarian (Празник, Почивен ден, Днес)"
    - "Tooltip shows holiday type in Bulgarian (Официален празник)"
    - "Page metadata uses Bulgarian title and description"
  artifacts:
    - path: "app/layout.tsx"
      provides: "Bulgarian metadata (title, description)"
      contains: "Почивни Работни Дни"
    - path: "components/Calendar.tsx"
      provides: "Bulgarian day headers and month formatting"
      contains: "['Пн', 'Вт', 'Ср'"
    - path: "components/Legend.tsx"
      provides: "Bulgarian legend labels"
      contains: "Празник"
    - path: "components/DayTooltip.tsx"
      provides: "Bulgarian date formatting using bg locale"
      imports: "import { bg } from 'date-fns/locale'"
  key_links:
    - from: "components/Calendar.tsx"
      to: "format() function"
      via: "Bulgarian month name rendering"
      pattern: "format.*locale.*bg"
    - from: "components/DayTooltip.tsx"
      to: "format() function with bg locale"
      via: "Bulgarian date formatting in tooltip"
      pattern: "format.*locale.*bg"
---

<objective>
Translate all user-facing text from English to Bulgarian with Cyrillic alphabet to satisfy INTL-01 and INTL-02 requirements.

Purpose: Phase 1 was completed with English placeholder text. User has now confirmed that ALL user-facing text must be in Bulgarian/Cyrillic. This gap closure plan retrofits Phase 1 components with proper Bulgarian localization.

Output: Fully localized Bulgarian interface with Cyrillic day names, month names, legend labels, tooltips, and metadata.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/codebase/CONVENTIONS.md
@.planning/phases/01-foundation-static-holiday-view/01-CONTEXT.md
@.planning/phases/01-foundation-static-holiday-view/01-03-SUMMARY.md

## Gap Context

This plan addresses the Bulgarian/Cyrillic localization gap identified after Phase 1 completion. The user approved Phase 1 with a note that localization would be required. Requirements INTL-01 and INTL-02 mandate all user-facing text be in Bulgarian with Cyrillic alphabet.

**Current English text needing translation:**
- Page metadata: title and description
- Day headers: Mon, Tue, Wed, Thu, Fri, Sat, Sun
- Month name: currently using date-fns default English formatting
- Legend labels: "Legend", "Official Holiday", "Weekend", "Today"
- Tooltip holiday type: displayed as-is from API (e.g., "Public Holiday")

## Technical Approach

date-fns already installed (v4.1.0). The `bg` (Bulgarian) locale is available as an optional import. We'll:
1. Import `{ bg }` from 'date-fns/locale' where needed
2. Pass `{ locale: bg }` option to format() calls
3. Hard-code Bulgarian strings for UI labels (no i18n library needed - single language app)
4. Update HTML lang attribute from "en" to "bg"

No new dependencies required.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Translate page metadata and HTML lang attribute</name>
  <files>app/layout.tsx</files>
  <action>
Update the metadata object with Bulgarian title and description:
- title: "Почивни Работни Дни 2026" (Pochivni Rabotni Dni 2026)
- description: "Календар на български празници и работни дни за планиране на годината" (Calendar of Bulgarian holidays and workdays for planning your year)

Change HTML lang attribute from "en" to "bg" for proper language declaration.

Keep font imports unchanged (Geist fonts support Cyrillic). Keep subset as "latin" - while counterintuitive, this subset includes basic Cyrillic glyphs for Bulgarian.
  </action>
  <verify>
```bash
grep -E '(title|description):.*Почивни|lang="bg"' app/layout.tsx
```
Should show Bulgarian Cyrillic text in metadata and lang="bg" attribute.
  </verify>
  <done>Page metadata displays Bulgarian title and description. HTML lang attribute is "bg".</done>
</task>

<task type="auto">
  <name>Task 2: Translate day headers and month name to Bulgarian</name>
  <files>components/Calendar.tsx</files>
  <action>
Import Bulgarian locale at the top:
```typescript
import { format, isSameDay } from 'date-fns';
import { bg } from 'date-fns/locale';
```

Replace English day headers array with Bulgarian abbreviations:
```typescript
['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Нд']
```

These map to:
- Пн = понеделник (Monday)
- Вт = вторник (Tuesday)
- Ср = сряда (Wednesday)
- Чт = четвъртък (Thursday)
- Пт = петък (Friday)
- Сб = събота (Saturday)
- Нд = неделя (Sunday)

Update month formatting to use Bulgarian locale:
```typescript
{format(firstDay, 'MMMM yyyy', { locale: bg })}
```

This will render month names like "януари 2026", "февруари 2026", etc.
  </action>
  <verify>
```bash
grep -E "(import.*bg.*locale|'Пн'|format.*locale.*bg)" components/Calendar.tsx
```
Should show Bulgarian locale import, Bulgarian day abbreviations, and format with locale option.
  </verify>
  <done>Day headers display Bulgarian abbreviations (Пн-Нд). Month name displays in Bulgarian using bg locale.</done>
</task>

<task type="auto">
  <name>Task 3: Translate legend labels to Bulgarian</name>
  <files>components/Legend.tsx</files>
  <action>
Replace English strings with Bulgarian equivalents:
- "Legend" → "Легенда"
- "Official Holiday" → "Официален празник"
- "Weekend" → "Почивен ден"
- "Today" → "Днес"

Update the component:
```typescript
export default function Legend() {
  return (
    <div className="border rounded-lg p-4">
      <h3 className="font-semibold mb-3">Легенда</h3>
      <div className="space-y-2">
        <div className="flex items-center gap-2">
          <div className="w-6 h-6 bg-red-500 rounded"></div>
          <span className="text-sm">Официален празник</span>
        </div>
        <div className="flex items-center gap-2">
          <div className="w-6 h-6 bg-gray-100 border rounded"></div>
          <span className="text-sm">Почивен ден</span>
        </div>
        <div className="flex items-center gap-2">
          <div className="w-6 h-6 border-2 border-blue-500 rounded"></div>
          <span className="text-sm">Днес</span>
        </div>
      </div>
    </div>
  );
}
```
  </action>
  <verify>
```bash
grep -E "(Легенда|Официален празник|Почивен ден|Днес)" components/Legend.tsx
```
Should show all four Bulgarian labels.
  </verify>
  <done>Legend displays with Bulgarian labels for heading and all three legend items.</done>
</task>

<task type="auto">
  <name>Task 4: Translate tooltip date format to Bulgarian</name>
  <files>components/DayTooltip.tsx</files>
  <action>
Import Bulgarian locale:
```typescript
import { format } from 'date-fns';
import { bg } from 'date-fns/locale';
```

Update format call to use Bulgarian locale:
```typescript
{format(parseDate(holiday.date), 'd MMM yyyy', { locale: bg })}
```

Pattern changed to 'd MMM yyyy' (Bulgarian convention: day first, abbreviated month, year). This will render dates like "1 яну 2026" (1 Jan 2026).

The holiday.type field comes from the API and may still be in English ("Public Holiday"). This is acceptable for now - the API provides English types. A future enhancement could map API types to Bulgarian, but this is not critical for INTL-01/INTL-02 compliance since:
1. Holiday name (holiday.name) is already in Bulgarian from the API
2. Date is now formatted in Bulgarian
3. The type is supplementary information

Update aria-label to Bulgarian:
```typescript
aria-label="Детайли за празника"
```
  </action>
  <verify>
```bash
grep -E "(import.*bg.*locale|format.*locale.*bg|aria-label=\"Детайли)" components/DayTooltip.tsx
```
Should show Bulgarian locale import, format with locale option, and Bulgarian aria-label.
  </verify>
  <done>Tooltip formats dates using Bulgarian locale. Aria-label is in Bulgarian. Holiday names from API already in Bulgarian.</done>
</task>

</tasks>

<verification>
## Overall Phase Checks

After completing all tasks, verify Bulgarian localization:

1. **Visual inspection:**
```bash
npm run dev
```
Visit http://localhost:3000 and confirm:
- Browser tab shows "Почивни Работни Дни 2026"
- Day headers show: Пн, Вт, Ср, Чт, Пт, Сб, Нд
- Month name shows Bulgarian (e.g., "януари 2026")
- Legend shows: Легенда, Официален празник, Почивен ден, Днес
- Hover over holiday shows Bulgarian date format (e.g., "1 яну 2026")

2. **Code verification:**
```bash
# Check all Bulgarian strings are present
grep -r "Почивни\|Легенда\|Официален\|Днес" app/ components/ --include="*.tsx"
# Check Bulgarian locale imports
grep -r "from 'date-fns/locale'" components/ --include="*.tsx"
# Check HTML lang attribute
grep 'lang="bg"' app/layout.tsx
```

3. **Build verification:**
```bash
npm run build
```
Ensure no TypeScript errors and build completes successfully.

## INTL Requirements Coverage

- INTL-01: All user-facing text displays in Bulgarian language ✓
  - Metadata (title, description)
  - Day headers (Пн-Нд)
  - Month names (януари, февруари, etc.)
  - Legend labels (Легенда, Официален празник, etc.)
  - Date formatting in tooltips
  - Aria labels

- INTL-02: All text uses Cyrillic alphabet throughout the application ✓
  - Day names: Cyrillic abbreviations
  - Month names: Cyrillic via date-fns bg locale
  - UI labels: Cyrillic hard-coded strings
  - Page metadata: Cyrillic
</verification>

<success_criteria>
1. Page metadata (title and description) displays in Bulgarian Cyrillic
2. HTML lang attribute is "bg"
3. Calendar day headers display Bulgarian abbreviations (Пн, Вт, Ср, Чт, Пт, Сб, Нд)
4. Month name displays in Bulgarian using date-fns bg locale
5. Legend heading and all labels display in Bulgarian Cyrillic
6. Tooltip date format uses Bulgarian locale
7. Tooltip aria-label is in Bulgarian
8. Application builds without errors
9. Requirements INTL-01 and INTL-02 are satisfied
10. No regression in existing functionality (calendar still works, tooltips still interactive)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-static-holiday-view/01-04-SUMMARY.md` documenting the localization changes, files modified, and confirmation that INTL-01 and INTL-02 requirements are now satisfied.
</output>
